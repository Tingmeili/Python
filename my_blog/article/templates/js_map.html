<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html{
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDsDHbzpBilPp_N65s8EqRKyOU2mrY0FyQ&callback=initMap">
    </script>
    <script src="/static/js/jquery/jquery.js"> </script>
  </head>
  <body>
    <div id="map" style="width:1800px;height:800px;"></div>
    <textarea id="id_kml" rows="20" name="kml" cols="40">
      <?xml version="1.0" encoding="utf-8"?> <kml xmlns="http://www.opengis.net/kml/2.2"> <Placemark> <name>My office</name> <description>This is the location of my office.</description> <Point> <coordinates>-83.482719,42.48746,0</coordinates> </Point> </Placemark> <Placemark> <name>4401829</name> <description>{&quot;list_line_type_&quot;: [&quot;5&quot;, &quot;2&quot;], &quot;list_line_group_str_&quot;: [&quot;0,1&quot;], &quot;type_schema_&quot;: &quot;SchemaType_A_E&quot;}</description> <LineString> <extrude>1</extrude> <coordinates> -83.482719,42.48746,0 -83.48270599999999,42.487457,0 -83.482693,42.487455,0 -83.48268,42.487452,0 -83.48266700000001,42.487449,0 -83.482654,42.487446,0 -83.482641,42.487443,0 -83.48262800000001,42.487441,0 -83.482615,42.487438,0 -83.482602,42.487435,0 -83.482589,42.487432,0 -83.48257599999999,42.487429,0 -83.482563,42.487427,0 -83.48255,42.487424,0 -83.48253699999999,42.487421,0 -83.482524,42.487418,0 -83.482524,42.487418,0 -83.482512,42.487417,0 -83.4825,42.487415,0 -83.482488,42.487413,0 -83.48247600000001,42.487412,0 -83.48246399999999,42.48741,0 -83.482451,42.487408,0 -83.482439,42.487406,0 -83.482427,42.487405,0 -83.482415,42.487403,0 -83.48240300000001,42.487401,0 -83.48239100000001,42.4874,0 -83.48237899999999,42.487398,0 -83.482367,42.487396,0 -83.482355,42.487394,0 -83.482343,42.487393,0 -83.482331,42.487391,0 -83.482319,42.487389,0 -83.48230700000001,42.487388,0 -83.48229499999999,42.487386,0 -83.482282,42.487384,0 -83.48227,42.487383,0 -83.482258,42.487381,0 -83.482246,42.487379,0 -83.48223400000001,42.487377,0 -83.48222199999999,42.487376,0 -83.48220999999999,42.487374,0 -83.482198,42.487372,0 -83.482186,42.487371,0 -83.482174,42.487369,0 -83.482162,42.487367,0 -83.48215,42.487366,0 -83.48213800000001,42.487364,0 -83.48212599999999,42.487362,0 -83.482113,42.48736,0 -83.482101,42.487359,0 -83.482089,42.487357,0 -83.482077,42.487355,0 -83.48206500000001,42.487354,0 -83.48205299999999,42.487352,0 -83.482041,42.48735,0 -83.482029,42.487348,0 -83.482017,42.487347,0 -83.482005,42.487345,0 -83.481993,42.487343,0 -83.481981,42.487342,0 -83.48196900000001,42.48734,0 -83.48195699999999,42.487338,0 -83.481945,42.487337,0 -83.481932,42.487335,0 -83.48192,42.487333,0 -83.481908,42.487331,0 -83.48189600000001,42.48733,0 -83.48188399999999,42.487328,0 -83.481872,42.487326,0 -83.48186,42.487325,0 -83.481848,42.487323,0 -83.481836,42.487321,0 -83.481824,42.48732,0 -83.48181200000001,42.487318,0 -83.48180000000001,42.487316,0 -83.48178799999999,42.487314,0 -83.481776,42.487313,0 -83.481763,42.487311,0 -83.481751,42.487309,0 -83.481739,42.487308,0 -83.48172700000001,42.487306,0 -83.48171499999999,42.487304,0 -83.481703,42.487302,0 -83.481691,42.487301,0 -83.481679,42.487299,0 -83.481667,42.487297,0 -83.481655,42.487296,0 -83.48164300000001,42.487294,0 -83.48163099999999,42.487292,0 -83.48161899999999,42.487291,0 -83.481607,42.487289,0 -83.481595,42.487287,0 -83.481582,42.487285,0 -83.48157,42.487284,0 -83.48155800000001,42.487282,0 -83.48154599999999,42.48728,0 -83.481534,42.487279,0 -83.481522,42.487277,0 </coordinates> </LineString> </Placemark> </kml></textarea>

    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 5,
          center: new google.maps.LatLng(42.494752,-82.934849),
          mapTypeId:google.maps.MapTypeId.SATELLITE
          });
          var marker=new google.maps.Marker({
              position:{lat: 42.48746, lng: -83.482719},
          });

          marker.setMap(map);
          console.log($("#id_kml").val());
          var ctaLayer = new google.maps.KmlLayer($("#id_kml").val());
          ctaLayer.setMap(map);


        }



    </script>

  </body>
</html>